/*
Aquarelle, The creative & opensource CSS framework.
Copyright (C) 2012 Floris MORICEAU <floris@floris-moriceau.info> and Guillaume AMAT <mozzito@free.fr>

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program. If not, see <http://www.gnu.org/licenses/>.
*/

(function(b){function a(c){if(b(c).has(":focus").length>0){b(c).addClass("child-has-focus").find(":focus").one("blur",function(){setTimeout(function(){a(c)},100)})}else{b(c).removeClass("child-has-focus")}}b(document).ready(function(){var c={delayIn:0,delayOut:0,fade:false,fallback:"",gravity:"n",html:true,live:true,offset:0,opacity:0.8,title:"title",trigger:"hover"};b(document).on("change",".input-file > input[type=file].real-input-file",function(){b(this).parent().find(".fake-input-file > input[type=text]").val(this.value)});b(document).on("mouseleave",".hover-dropdown-list ul, .focus-dropdown-list ul, .dropdown-top-menu ul, .dropdown-side-menu ul",function(){a(this)});b(document).on("click",".focus-dropdown-list > :button",function(){b(this).focus()});b(".tooltip-n").tipsy(b.extend({},c,{gravity:"n"}));b(".tooltip-ne").tipsy(b.extend({},c,{gravity:"ne"}));b(".tooltip-e").tipsy(b.extend({},c,{gravity:"e"}));b(".tooltip-se").tipsy(b.extend({},c,{gravity:"se"}));b(".tooltip-s").tipsy(b.extend({},c,{gravity:"s"}));b(".tooltip-sw").tipsy(b.extend({},c,{gravity:"sw"}));b(".tooltip-w").tipsy(b.extend({},c,{gravity:"w"}));b(".tooltip-nw").tipsy(b.extend({},c,{gravity:"nw"}))})})(jQuery);var i,html5_elements=["address","article","aside","audio","canvas","command","datalist","details","dialog","figure","figcaption","footer","header","hgroup","keygen","mark","meter","menu","nav","progress","ruby","section","time","video"];for(i in html5_elements){document.createElement(html5_elements[i])}i=html5_elements=undefined;(function(c){function b(e,d){return(typeof e=="function")?(e.call(d)):e}function a(e,d){this.$element=c(e);this.options=d;this.enabled=true;this.fixTitle()}a.prototype={show:function(){var g=this.getTitle();if(g&&this.enabled){var f=this.tip();f.find(".tipsy-inner")[this.options.html?"html":"text"](g);f[0].className="tipsy";f.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body);var k=c.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight});var d=f[0].offsetWidth,j=f[0].offsetHeight,h=b(this.options.gravity,this.$element[0]);var e;switch(h.charAt(0)){case"n":e={top:k.top+k.height+this.options.offset,left:k.left+k.width/2-d/2};break;case"s":e={top:k.top-j-this.options.offset,left:k.left+k.width/2-d/2};break;case"e":e={top:k.top+k.height/2-j/2,left:k.left-d-this.options.offset};break;case"w":e={top:k.top+k.height/2-j/2,left:k.left+k.width+this.options.offset};break}if(h.length==2){if(h.charAt(1)=="w"){e.left=k.left+k.width/2-15}else{e.left=k.left+k.width/2-d+15}}f.css(e).addClass("tipsy-"+h);f.find(".tipsy-arrow")[0].className="tipsy-arrow tipsy-arrow-"+h.charAt(0);if(this.options.className){f.addClass(b(this.options.className,this.$element[0]))}if(this.options.fade){f.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity})}else{f.css({visibility:"visible",opacity:this.options.opacity})}}},hide:function(){if(this.options.fade){this.tip().stop().fadeOut(function(){c(this).remove()})}else{this.tip().remove()}},fixTitle:function(){var d=this.$element;if(d.attr("title")||typeof(d.attr("original-title"))!="string"){d.attr("original-title",d.attr("title")||"").removeAttr("title")}},getTitle:function(){var f,d=this.$element,e=this.options;this.fixTitle();var f,e=this.options;if(typeof e.title=="string"){f=d.attr(e.title=="title"?"original-title":e.title)}else{if(typeof e.title=="function"){f=e.title.call(d[0])}}f=(""+f).replace(/(^\s*|\s*$)/,"");return f||e.fallback},tip:function(){if(!this.$tip){this.$tip=c('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"></div>')}return this.$tip},validate:function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null}},enable:function(){this.enabled=true},disable:function(){this.enabled=false},toggleEnabled:function(){this.enabled=!this.enabled}};c.fn.tipsy=function(h){if(h===true){return this.data("tipsy")}else{if(typeof h=="string"){var k=this.data("tipsy");if(k){k[h]()}return this}}this.each(function(){c.removeData(this,"tipsy")});this.die("mouseenter.tipsy").die("mouseleave.tipsy").die("focus.tipsy").die("blur.tipsy");h=c.extend({},c.fn.tipsy.defaults,h);function g(m){var n=c.data(m,"tipsy");if(!n){n=new a(m,c.fn.tipsy.elementOptions(m,h));c.data(m,"tipsy",n)}return n}function l(){var m=g(this);m.hoverState="in";if(h.delayIn==0){m.show()}else{m.fixTitle();setTimeout(function(){if(m.hoverState=="in"){m.show()}},h.delayIn)}}function f(){var m=g(this);m.hoverState="out";if(h.delayOut==0){m.hide()}else{setTimeout(function(){if(m.hoverState=="out"){m.hide()}},h.delayOut)}}if(!h.live){this.each(function(){g(this)})}if(h.trigger!="manual"){var d=h.live?"live":"bind",j=h.trigger=="hover"?"mouseenter.tipsy":"focus.tipsy",e=h.trigger=="hover"?"mouseleave.tipsy":"blur.tipsy";this[d](j,l)[d](e,f)}return this};c.fn.tipsy.defaults={className:null,delayIn:0,delayOut:0,fade:false,fallback:"",gravity:"n",html:false,live:false,offset:0,opacity:0.8,title:"title",trigger:"hover"};c.fn.tipsy.elementOptions=function(e,d){return c.metadata?c.extend({},d,c(e).metadata()):d};c.fn.tipsy.autoNS=function(){return c(this).offset().top>(c(document).scrollTop()+c(window).height()/2)?"s":"n"};c.fn.tipsy.autoWE=function(){return c(this).offset().left>(c(document).scrollLeft()+c(window).width()/2)?"e":"w"};c.fn.tipsy.autoBounds=function(e,d){return function(){var f={ns:d[0],ew:(d.length>1?d[1]:false)},j=c(document).scrollTop()+e,g=c(document).scrollLeft()+e,h=c(this);if(h.offset().top<j){f.ns="n"}if(h.offset().left<g){f.ew="w"}if(c(window).width()+c(document).scrollLeft()-h.offset().left<e){f.ew="e"}if(c(window).height()+c(document).scrollTop()-h.offset().top<e){f.ns="s"}return f.ns+(f.ew?f.ew:"")}}})(jQuery);